2025-10-19 12:48:38 [ERROR]: Application Error | {"service":"voting-system","error":"insert or update on table \"Vote\" violates foreign key constraint \"fk_candidate\"","stack":"error: insert or update on table \"Vote\" violates foreign key constraint \"fk_candidate\"\n    at C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\pg-pool\\index.js:45:11\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","context":{"context":"castCombinedVote","voucher":"BSC00000","presidentCandidateId":1,"vicePresidentCandidateId":2},"category":"ERROR"}
2025-10-19 13:01:02 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_SET","details":{"key":"vote:verification:anS3WXJlKZtt","size":321},"category":"AUDIT"}
2025-10-19 13:01:02 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_INVALIDATED","details":{"type":"stats","count":0},"category":"AUDIT"}
2025-10-19 13:01:02 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_INVALIDATED","details":{"type":"position","positionId":5},"category":"AUDIT"}
2025-10-19 13:01:02 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_INVALIDATED","details":{"type":"position","positionId":6},"category":"AUDIT"}
2025-10-19 13:01:02 [INFO]: Vote Cast | {"service":"voting-system","voucher":"BSC00000","candidateId":3,"positionId":5,"verificationCode":"anS3WXJlKZtt-PRESIDENT","category":"VOTE"}
2025-10-19 13:01:02 [INFO]: Vote Cast | {"service":"voting-system","voucher":"BSC00000","candidateId":6,"positionId":6,"verificationCode":"anS3WXJlKZtt-VICE_PRESIDENT","category":"VOTE"}
2025-10-19 13:02:42 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_HIT","details":{"key":"vote:verification:anS3WXJlKZtt","source":"verifyVoteByCode"},"category":"AUDIT"}
2025-10-19 13:03:43 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_MISS","details":{"key":"vote:verification:JZk5fM8uEZKt","source":"verifyVoteByCode"},"category":"AUDIT"}
2025-10-19 13:34:55 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_DEL","details":{"key":"vote:verification:anS3WXJlKZtt"},"category":"AUDIT"}
2025-10-19 13:34:55 [INFO]: Audit Event | {"service":"voting-system","auditEvent":"CACHE_EXPIRED","details":{"key":"vote:verification:anS3WXJlKZtt"},"category":"AUDIT"}
2025-10-19 13:39:43 [ERROR]: Application Error | {"service":"voting-system","error":"Cannot destructure property 'email' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'email' of 'req.body' as it is undefined.\n    at C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:41:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:4:12)\n    at loginAdmin (C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:39:65)\n    at Layer.handleRequest (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\index.js:435:11)","context":{"context":"loginAdmin"},"category":"ERROR"}
2025-10-19 13:46:53 [ERROR]: Application Error | {"service":"voting-system","error":"Cannot destructure property 'email' of 'req.body' as it is undefined.","stack":"TypeError: Cannot destructure property 'email' of 'req.body' as it is undefined.\n    at C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:41:13\n    at Generator.next (<anonymous>)\n    at C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:8:71\n    at new Promise (<anonymous>)\n    at __awaiter (C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:4:12)\n    at loginAdmin (C:\\Users\\Ghost\\projects\\sjbu-voting\\src\\controllers\\admin.controller.ts:39:65)\n    at Layer.handleRequest (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (C:\\Users\\Ghost\\projects\\sjbu-voting\\node_modules\\router\\index.js:435:11)","context":{"context":"loginAdmin"},"category":"ERROR"}
2025-10-19 14:10:36 [WARN]: Security Event | {"service":"voting-system","event":"ADMIN_LOGIN_FAILED","details":{"email":"anthony@sjbu-voting.com","reason":"invalid_password"},"severity":"medium","category":"SECURITY"}
2025-10-19 14:10:54 [INFO]: Authentication Event | {"service":"voting-system","userId":"2","action":"ADMIN_LOGIN","category":"AUTH"}
2025-10-19 14:12:14 [INFO]: Statistics Generated | {"service":"voting-system","stats":{"totalVoters":2,"totalVotesCast":2,"voterTurnout":50,"positionsWithStats":[{"positionId":5,"positionName":"President","totalCandidates":3,"totalVotes":3,"voterTurnout":50,"candidates":[{"candidateId":3,"candidateName":"Alice Johnson","manifesto":"Experienced leader focused on student welfare and academic excellence.","voteCount":1,"votePercentage":100},{"candidateId":4,"candidateName":"Bob Smith","manifesto":"Tech-savvy innovator dedicated to modernizing club operations.","voteCount":0,"votePercentage":0},{"candidateId":5,"candidateName":"Carol Williams","manifesto":"Community organizer with strong communication skills.","voteCount":0,"votePercentage":0}]},{"positionId":6,"positionName":"Vice President","totalCandidates":3,"totalVotes":3,"voterTurnout":50,"candidates":[{"candidateId":6,"candidateName":"David Brown","manifesto":"Detail-oriented organizer with project management expertise.","voteCount":1,"votePercentage":100},{"candidateId":7,"candidateName":"Emma Davis","manifesto":"Creative thinker focused on event planning and member engagement.","voteCount":0,"votePercentage":0},{"candidateId":8,"candidateName":"Frank Wilson","manifesto":"Analytical problem-solver with financial management skills.","voteCount":0,"votePercentage":0}]}],"overallStats":{"totalPositions":2,"totalCandidates":6,"averageVotesPerPosition":1,"mostVotedPosition":"President","leastVotedPosition":"Vice President"}},"category":"STATS"}
2025-10-19 14:12:14 [INFO]: Admin Action | {"service":"voting-system","adminId":2,"action":"VIEW_STATS","target":"overall","details":{"totalVoters":2,"totalVotes":2},"category":"ADMIN"}
2025-10-19 14:14:03 [INFO]: Statistics Generated | {"service":"voting-system","stats":{"totalVoters":2,"totalVotesCast":2,"voterTurnout":50,"positionsWithStats":[{"positionId":5,"positionName":"President","totalCandidates":3,"totalVotes":3,"voterTurnout":50,"candidates":[{"candidateId":3,"candidateName":"Alice Johnson","manifesto":"Experienced leader focused on student welfare and academic excellence.","voteCount":1,"votePercentage":100},{"candidateId":4,"candidateName":"Bob Smith","manifesto":"Tech-savvy innovator dedicated to modernizing club operations.","voteCount":0,"votePercentage":0},{"candidateId":5,"candidateName":"Carol Williams","manifesto":"Community organizer with strong communication skills.","voteCount":0,"votePercentage":0}]},{"positionId":6,"positionName":"Vice President","totalCandidates":3,"totalVotes":3,"voterTurnout":50,"candidates":[{"candidateId":6,"candidateName":"David Brown","manifesto":"Detail-oriented organizer with project management expertise.","voteCount":1,"votePercentage":100},{"candidateId":7,"candidateName":"Emma Davis","manifesto":"Creative thinker focused on event planning and member engagement.","voteCount":0,"votePercentage":0},{"candidateId":8,"candidateName":"Frank Wilson","manifesto":"Analytical problem-solver with financial management skills.","voteCount":0,"votePercentage":0}]}],"overallStats":{"totalPositions":2,"totalCandidates":6,"averageVotesPerPosition":1,"mostVotedPosition":"President","leastVotedPosition":"Vice President"}},"category":"STATS"}
2025-10-19 14:14:03 [INFO]: Admin Action | {"service":"voting-system","adminId":2,"action":"VIEW_ELECTION_SUMMARY","category":"ADMIN"}
